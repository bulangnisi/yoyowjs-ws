!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.t=e();else if("function"==typeof define&&define.o)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).i=e()}}(function(){return function e(n,t,o){function i(r,s){if(!t[r]){if(!n[r]){var a="function"==typeof require&&require;if(!s&&a)return a(r,!0);if(c)return c(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var f=t[r]={t:{}};n[r][0].call(f.t,function(e){var t=n[r][1][e];return i(t||e)},f,f.t,e,n,t,o)}return t[r].t}for(var c="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,n,t){(function(o,i){"use strict";function c(e){return e&&e.s?e:{default:e}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.s=!0;var s,a=c(e("./ChainWebSocket")),u=c(e("./GrapheneApi")),f=c(e("./ChainConfig"));i&&void 0==i.u&&(i.u=JSON.parse(o.h.l||!1)),"undefined"!=typeof window&&void 0==window.u&&(window.u=JSON.parse(o.h.l||!1)),t.default={p:function(e){this._=e,s&&s.p(e)},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",n=arguments[1];return s?s.reset(e):((s=new l).p(this._),s&&n&&s.connect(e)),s},v:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",n=arguments[1];return s||(s=new l).p(this._),s&&n&&s.connect(e),s},m:function(){return Apis.v().k},close:function(){s&&(s.close(),s=null)}};var l=function(){function e(){r(this,e),this.g=!1,this.S=null}return e.prototype.connect=function(e){var n=this;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&e.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.W=new a.default(e,this._),this.T=this.W.Y("","").then(function(){null!=n.S&&clearInterval(n.S),n.S=null,n.g=!1,console.log("Login done"),n.I=new u.default(n.W,"database"),n.C=new u.default(n.W,"network_broadcast"),n.O=new u.default(n.W,"history"),n.R=new u.default(n.W,"crypto");var e=n.I.init().then(function(){return n.I.exec("get_chain_id",[]).then(function(e){return n.k=e,f.default.D(e)})});return Promise.all([e,n.C.init(),n.O.init(),n.R.init().catch(function(e){return console.error("ApiInstance\tCrypto API Error",e)})])}).catch(function(e){return __WS_DEBUG__&&console.log("ApiInstance\tWebSocket connect Error",e),Promise.reject({message:"ApiInstance\tWebSocket connect Error",code:e.code})})},e.prototype.close=function(){this.W&&this.W.close(),this.W=null},e.prototype.reset=function(e){if(!this.g){this.g=!0;var n=this;this.S=setInterval(function(){n._&&n._("reconnect"),n.close(),n.connect(e)},1e4)}},e.prototype.U=function(){return this.I},e.prototype.A=function(){return this.C},e.prototype.G=function(){return this.O},e.prototype.B=function(){return this.R},e.prototype.p=function(e){this._=e},e}();n.t=t.default}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{N:2,J:3,M:4,P:8}],2:[function(e,n,t){(function(e){"use strict";t.s=!0;var o=void 0,i={q:e.h.L||"YYW"};o={j:"YOYO",q:"YYW",F:15,V:86400,H:86400,K:{X:{j:"YOYO",q:"YYW",k:"ae4f234c75199f67e526c9478cf499dd6e94c2b66830ee5c58d0868a3179baf6"},Z:{j:"TEST",q:"YYW",k:"3505e367fe6cde243f2a1c39bd8e58557e23271dd6cbf4b29a8dc8c44c9af8fe"}},D:function(e){var n=void 0,t=void 0,c=void 0,r=void 0,s=void 0;for(n=0,t=(s=Object.keys(o.K)).length;n<t;n++)if(r=s[n],(c=o.K[r]).k===e)return o.$=r,c.q&&(o.q=c.q,i.q=c.q),c.j&&(o.j=c.j),console.log("chain_id:",e),console.log("network_name:",r),{$:r,ee:c};o.$||console.log("Unknown chain id (this may be a testnet)",e)},reset:function(){o.j="YOYO",o.q="YYW",i.q="YYW",o.F=15,o.V=86400,console.log("Chain config reset")},ne:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYW";o.q=e,i.q=e}},t.default=o,n.t=t.default}).call(this,e("_process"))},{P:8}],3:[function(e,n,t){(function(o){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.s=!0;var c=function(e){return e&&e.s?e:{default:e}}(e("./SharedWebSocket")),r=void 0,s=function(){function n(t,s){var a=this;i(this,n),r="undefined"!=typeof WebSocket||o.h.te?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?e("ReconnectingWebSocket"):WebSocket:e("ws"),this._=s;try{if("undefined"!=typeof window&&window.SharedWorker)this.oe=new c.default(t,5e3),__WS_DEBUG__&&console.log("-------SharedWebSocket---------",this.oe);else{this.oe=new r(t),__WS_DEBUG__&&console.log("-------WebSocketClient---------",this.oe);var u=this;this.oe.ping?this.ie=setInterval(function(){u.oe.ping(0)},2e3):(this.oe.ce=5e3,this.ie=setInterval(function(){3==u.oe.readyState&&(u.re(),u._&&u._("closed"))},2e3))}}catch(e){console.error("invalid websocket URL:",e),this.se&&this.se(e)}this.se=null,this.ae=new Promise(function(e,n){a.se=n,a.oe.ue("open",function(){__WS_DEBUG__&&console.log("onopen..."),a._&&a._("open"),e()}),a.oe.ue("error",function(e){__WS_DEBUG__&&console.log("error..."),a.re(),a._&&a._("error"),a.se&&a.se(e)}),a.oe.ue("message",function(e){return a.listener(JSON.parse(e))}),a.oe.ue("close",function(e){__WS_DEBUG__&&console.log("onclose...",e),a.re(),a._&&a._("closed"),a.se&&a.se(e)})}),this.fe=0,this.le={},this.he={},this.de={}}return n.prototype.re=function(){null!=this.ie&&(clearInterval(this.ie),this.ie=null)},n.prototype.call=function(e){var n=this,t=e[1];if(__WS_DEBUG__&&console.log('[ChainWebSocket] >---- call -----\x3e  "id":'+(this.fe+1),JSON.stringify(e)),this.fe+=1,"set_subscribe_callback"!==t&&"subscribe_to_market"!==t&&"broadcast_transaction_with_callback"!==t&&"set_pending_transaction_callback"!==t||(this.he[this.fe]={pe:e[2][0]},e[2][0]=this.fe),"unsubscribe_from_market"===t||"unsubscribe_from_accounts"===t){if("function"!=typeof e[2][0])throw new Error("First parameter of unsub must be the original callback");var o=e[2].splice(0,1)[0];for(var i in this.he)if(this.he[i].pe===o){this.de[this.fe]=i;break}}var c={method:"call",be:e};return c.id=this.fe,new Promise(function(e,t){n.le[n.fe]={time:new Date,resolve:e,reject:t},n.oe.send(JSON.stringify(c))})},n.prototype.listener=function(e){__WS_DEBUG__&&console.log("[ChainWebSocket] <---- reply ----<",JSON.stringify(e));var n=!1,t=null;"notice"===e.method&&(n=!0,e.id=e.be[0]),(t=n?this.he[e.id].pe:this.le[e.id])&&!n?(e.error?t.reject(e.error):t.resolve(e.result),delete this.le[e.id],this.de[e.id]&&(delete this.he[this.de[e.id]],delete this.de[e.id])):t&&n?t(e.be[1]):__WS_DEBUG__&&console.log("Warning: unknown websocket response: ",e)},n.prototype.Y=function(e,n){var t=this;return this.ae.then(function(){return t.call([1,"login",[e,n]])})},n.prototype.close=function(){this.oe.close()},n.prototype.reset=function(){this.oe.reset&&this.oe.reset()},n}();t.default=s,n.t=t.default}).call(this,e("_process"))},{we:5,_e:6,P:8,oe:7}],4:[function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.s=!0;var i=function(){function e(n,t){o(this,e),this.W=n,this.ve=t}return e.prototype.init=function(){var e=this;return this.W.call([1,this.ve,[]]).then(function(n){return e.me=n,e})},e.prototype.exec=function(e,n){return this.W.call([this.me,e,n]).catch(function(t){console.log("!!! GrapheneApi error: ",e,n,t,JSON.stringify(t))})},e}();t.default=i,n.t=t.default},{}],5:[function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.s=!0;var i='var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};var ports=[];var socket=null;var server="";var ws_timeout=5000;var pingSocket=null;var close_normal=false;function broadcast(b){for(var a=0;a<ports.length;a++){ports[a].postMessage(b)}}var wconsole={error:function error(b,a){wconsole.post("error",b,a)},log:function log(b,a){wconsole.post("log",b,a)},msg:function msg(a){broadcast(a)},post:function post(a,c,b){broadcast({tag:a,title:c,msg:b})},postTarget:function postTarget(a,b){a.postMessage(b)}};function initWS(a){var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5000;close_normal=false;if(socket===null){socket=new WebSocket(a);socket.timeoutInterval=b;socket.onopen=function(){broadcast({event:"onopen"})};socket.onerror=function(d){broadcast({event:"onerror",data:d});clearInterval(pingSocket)};socket.onmessage=function(d){broadcast({event:"onmessage",data:d.data})};socket.onclose=function(d){broadcast({event:"onclose",data:d});clearInterval(pingSocket)};pingSocket=setInterval(function(){if(socket.readyState==3){broadcast({event:"onclose",data:{code:close_normal?1000:1005}});clearInterval(pingSocket)}},1000)}}function procMsg(c,a){if((typeof c==="undefined"?"undefined":_typeof(c))==="object"){if(!!c.method){switch(c.method){case"send":if(!!socket){socket.send(c.pars[0])}break;case"close":close_normal=true;ports.clean();if(!!socket){socket.close()}break;case"init":var b=c.pars[0];ws_timeout=c.pars[1];if(b!==server){server=b;initWS(server,ws_timeout)}break;case"reset":close_normal=true;socket.close();socket=null;initWS(server,ws_timeout);break;case"ping":wconsole.postTarget(a,{tag:"log",title:"ping",msg:socket.readyState});break;default:wconsole.postTarget(a,{tag:"error",title:"worker",msg:"Unsupported method"});break}}}}onconnect=function onconnect(b){var a=b.ports[0];ports.push(a);a.addEventListener("message",function(c){procMsg(c.data,a)});a.start();a.postMessage({event:"onconnect",data:ports.length})};',c=function(){function e(n,t){var c=this;o(this,e),this.ke=n,this.timeout=t,this.onopen=null,this.onerror=null,this.onmessage=null,this.onclose=null,this.ge=null;var r=new Blob([i]);this.ge=new SharedWorker(window.URL.createObjectURL(r)),this.ge.port.onmessage=function(e){c.Se(e.data)},this.ge.addEventListener("error",function(e){this.ye(e.message)})}return e.prototype.Se=function(e){if(e.tag)switch(e.tag){case"error":console.error(e.title,e.We);break;case"log":console.log(e.title,e.We)}else if(e.event)switch(e.event){case"onopen":this.onopen&&this.onopen();break;case"onerror":this.onerror&&this.onerror(e.data);break;case"onmessage":this.onmessage&&this.onmessage(e.data);break;case"onclose":this.onclose&&this.onclose(e.data);break;case"onconnect":1==e.data&&this.ge.port.postMessage({method:"init",Te:[this.ke,this.timeout]})}},e.prototype.ye=function(e){console.error(e)},e.prototype.send=function(e){this.ge.port.postMessage({method:"send",Te:[e]})},e.prototype.close=function(){this.ge.port.postMessage({method:"close"})},e.prototype.reset=function(){this.ge.port.postMessage({method:"reset"})},e.prototype.ue=function(e,n){switch(e){case"open":this.onopen=n;break;case"error":this.onerror=n;break;case"message":this.onmessage=n;break;case"close":this.onclose=n}},e}();t.default=c,n.t=t.default},{}],6:[function(e,n,t){!function(e,t){void 0!==n&&n.t?n.t=t():e._e=t()}(this,function(){function e(n,t,o){function i(e,n){var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}var c={debug:!1,Ee:!0,Ye:1e3,Ie:3e4,Ce:1.5,ce:2e3,Oe:null,binaryType:"blob"};o||(o={});for(var r in c)void 0!==o[r]?this[r]=o[r]:this[r]=c[r];this.url=n,this.Re=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,a=this,u=!1,f=!1,l=null,h=document.createElement("div");h.addEventListener("open",function(e){a.onopen(e)}),h.addEventListener("close",function(e){a.onclose(e)}),h.addEventListener("connecting",function(e){a.De(e)}),h.addEventListener("message",function(e){a.onmessage(e)}),h.addEventListener("error",function(e){a.onerror(e)}),this.addEventListener=h.addEventListener.bind(h),this.removeEventListener=h.removeEventListener.bind(h),this.dispatchEvent=h.dispatchEvent.bind(h),this.open=function(n){if(s=new WebSocket(a.url,t||[]),s.binaryType=this.binaryType,n){if(this.Oe&&this.Re>this.Oe)return}else h.dispatchEvent(i("connecting")),this.Re=0;(a.debug||e.Ue)&&console.debug("ReconnectingWebSocket","attempt-connect",a.url);var o=s,c=setTimeout(function(){(a.debug||e.Ue)&&console.debug("ReconnectingWebSocket","connection-timeout",a.url),f=!0,o.close(),f=!1},a.ce);s.onopen=function(t){clearTimeout(c),(a.debug||e.Ue)&&console.debug("ReconnectingWebSocket","onopen",a.url),a.protocol=s.protocol,a.readyState=WebSocket.OPEN,a.Re=0;var o=i("open");o.xe=n,n=!1,h.dispatchEvent(o)},s.onclose=function(t){if(clearTimeout(c),s=null,u)a.readyState=WebSocket.CLOSED,h.dispatchEvent(i("close"));else{a.readyState=WebSocket.CONNECTING;var o=i("connecting");o.code=t.code,o.reason=t.reason,o.wasClean=t.wasClean,h.dispatchEvent(o),n||f||((a.debug||e.Ue)&&console.debug("ReconnectingWebSocket","onclose",a.url),h.dispatchEvent(i("close")));var c=a.Ye*Math.pow(a.Ce,a.Re);l=setTimeout(function(){a.Re++,a.open(!0)},c>a.Ie?a.Ie:c)}},s.onmessage=function(n){(a.debug||e.Ue)&&console.debug("ReconnectingWebSocket","onmessage",a.url,n.data);var t=i("message");t.data=n.data,h.dispatchEvent(t)},s.onerror=function(n){(a.debug||e.Ue)&&console.debug("ReconnectingWebSocket","onerror",a.url,n),h.dispatchEvent(i("error"))}},1==this.Ee&&this.open(!1),this.send=function(n){if(s)return(a.debug||e.Ue)&&console.debug("ReconnectingWebSocket","send",a.url,n),s.send(n);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,n){void 0===e&&(e=1e3),u=!0,s&&s.close(e,n),l&&(clearTimeout(l),l=null)},this.refresh=function(){s&&s.close()}}if("undefined"!=typeof window&&"WebSocket"in window)return e.prototype.onopen=function(e){},e.prototype.onclose=function(e){},e.prototype.De=function(e){},e.prototype.onmessage=function(e){},e.prototype.onerror=function(e){},e.Ue=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e})},{}],7:[function(e,n,t){},{}],8:[function(e,n,t){function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(l===setTimeout)return setTimeout(e,0);if((l===o||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(n){try{return l.call(null,e,0)}catch(n){return l.call(this,e,0)}}}function r(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(n){try{return h.call(null,e)}catch(n){return h.call(this,e)}}}function s(){w&&p&&(w=!1,p.length?b=p.concat(b):_=-1,b.length&&a())}function a(){if(!w){var e=c(s);w=!0;for(var n=b.length;n;){for(p=b,b=[];++_<n;)p&&p[_].Ae();_=-1,n=b.length}p=null,w=!1,r(e)}}function u(e,n){this.Ge=e,this.Be=n}function f(){}var l,h,d=n.t={};!function(){try{l="function"==typeof setTimeout?setTimeout:o}catch(e){l=o}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,b=[],w=!1,_=-1;d.Ne=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];b.push(new u(e,n)),1!==b.length||w||c(a)},u.prototype.Ae=function(){this.Ge.apply(null,this.Be)},d.title="browser",d.te=!0,d.h={},d.Je=[],d.version="",d.Me={},d.ue=f,d.addListener=f,d.Pe=f,d.qe=f,d.removeListener=f,d.Le=f,d.je=f,d.Fe=f,d.Ve=f,d.ze=function(e){return[]},d.He=function(e){throw new Error("process.binding is not supported")},d.Ke=function(){return"/"},d.Qe=function(e){throw new Error("process.chdir is not supported")},d.Xe=function(){return 0}},{}]},{},[1])(1)});